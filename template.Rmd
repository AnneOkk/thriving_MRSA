---
title: "Integrate Thriving"
author: "Anne Kleine"
date: '`r Sys.Date()`'
output:
  html_document:
    number_sections: yes
    theme: yeti
    toc: yes
    toc_float: yes
    df_print: paged
---

Code version: `r system("git log -1 --format=oneline | cut -d' ' -f1", intern = TRUE)`

```{r knitr, include = FALSE}
knitr::opts_chunk$set(include = T, echo=FALSE, warning=FALSE, message=FALSE)

DOCNAME = "Integrate Thriving"
knitr::opts_chunk$set(autodep        = TRUE,
                      cache          = TRUE,
                      cache.path     = paste0("cache/", DOCNAME, "/"),
                      cache.comments = TRUE,
                      echo           = FALSE,
                      error          = FALSE,
                      fig.align      = "center",
                      fig.path       = paste0("figures/", DOCNAME, "/"),
                      fig.width      = 10,
                      fig.height     = 8,
                      message        = FALSE,
                      warning        = FALSE)
```

```{r libaries, cache = FALSE, include = FALSE}

packages <- c("mediation", "foreign", "tidyverse","stargazer","multicon", "ggplot2", "plyr", "reshape2", "readxl", "haven", "sjlabelled", "janitor",
              "scales", "grid", "tidyLPA", "Rcpp", "naniar", "dplyr", "car", "mice", "lubridate", "zoo", "purrr", "rlang", "mgsub", "datapasta", "stringr",
              "rstudioapi", "labelled", "modi", "semPlot", "kulife", "knitr", "janitor", "DT", "sjlabelled", "kableExtra", 
              "glue", "numform", "xtable", "officer", "Hmisc",
              "lme4", "lmerTest", "RSA", "gridExtra", "MuMIn", "misty", "performance",
              "sjlabelled", "kableExtra", "flextable", "sjPlot", "reprex", "datapasta", "semoutput", "semTools",
              "merTools", "xlsx")

source("./R/remote_functions.R")
source("./R/MultilevelRSA.r")

ipak(packages)

```

```{r get_data, cache = FALSE, include = FALSE}
options(knitr.table.format = function() {
  if (knitr::is_latex_output()) 'latex' else 'pandoc'
})

library(rlang)
library(tidyverse)
library(foreign)
files <- dir("./data", pattern = "\\.sav$", full.names = FALSE) 
df_list <- vector("list", length(files))
names(df_list) <- files

df_list <- read_in(files)

list2env(df_list,envir=.GlobalEnv)

```



```{r session-info, cache = FALSE, include = FALSE}
devtools::session_info()
```

```{r cleanup-docs, cache = FALSE, include = FALSE}
doc.files <- c(list.files(pattern = "pdf"),
               list.files(pattern = "html"),
               list.files(pattern = "docx"))

for (file in doc.files) {
    file.rename(file, file.path("./docs", file))
}
```

```{r, child='./analysis/Thriving_analyses.Rmd'}
```
